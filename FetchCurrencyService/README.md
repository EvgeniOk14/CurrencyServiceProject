# Микросервис - FetchCurrencyService

## Краткое описание микросервиса:
-**FetchCurrencyService** — это микросервис, который является как продюсером для передачи 
 так и консьюмером для приёма сообщений из топиков Kafka
 Данный микросервис принимает сообщение от микросервиса KafkaServer слушая топик "Fetch-currency-topic".
 Также данный микросервис посылает ответы в микросервис KafkaServer в топик для ответов "response-topic".
 Микросервис связывается со сторонним API который показывает курсы валют и получает нужные валюты и их курсы.
 Микросервис связан с двумя базами данных MongoDB и PostgreSQL.
 В базу данных MongoDB он сохраняет requestId запросов для анализа дублирования запросов.
 В базу данных PostgreSQL он сохраняет полезную нагрузку сообщения, а также сами ответы от стороннего API,
 т.е. коды валют из курсы обмена, базовую валюту и дату обмена.
 Т.е. данный микросервис получает нужную информацию и сохраняет её в базе данных,
 а также обновляет её если данные устарели или срок хранения истёк.
 Для удаления истёкших по сроку данных используется планировщик задач.
 FetchCurrencyService интегрирован с Prometheus для сбора метрик производительности и состояния системы.
 Prometheus позволяет отслеживать такие показатели, как время отклика, количество запросов, уровень ошибок
 и загрузка системы. Эти метрики помогают в оперативном анализе и выявлении узких мест в производительности.
 Для удобного отображения собранных метрик используется Grafana.
 С помощью Grafana можно создавать интерактивные дашборды, которые позволяют визуализировать данные в реальном
 времени. Это дает командам возможность быстро реагировать на изменения в производительности системы
 и принимать обоснованные решения на основе собранной информации.

## Проект поддерживает следующие функции:
- **Получение и обработка валютных курсов**: Микросервис получает курсы валют от стороннего API и обрабатывает их.
- **Интеграция с Kafka**: Микросервис функционирует как продюсер и консьюмер, взаимодействуя с топиками Kafka для передачи и получения сообщений.
- **Хранение запросов**: Сохранение идентификаторов запросов (requestId) в базе данных MongoDB для анализа дублирования запросов.
- **Хранение ответов**: Сохранение полезной нагрузки сообщений и ответов от стороннего API в базе данных PostgreSQL, включая коды валют, базовую валюту и дату обмена.
- **Обновление устаревших данных**: Автоматическое обновление данных в базе данных, если они устарели или срок хранения истёк.
- **Планировщик задач**: Использование планировщика задач для удаления истёкших по сроку данных из базы данных.
- **Логирование**: Ведение логов для отслеживания процессов и упрощения отладки.
- **Обработка ошибок**: Эффективная обработка ошибок и управление исключениями для обеспечения стабильной работы микросервиса.

## Стек технологий
- **Java 21** — основной язык программирования.
- **Spring Boot** (версия 3.4.0) — фреймворк для создания приложения.
- **Maven** — система сборки и управления зависимостями.
- **Prometheus** - Система мониторинга и сбора метрик для анализа производительности приложений.
- **Grafana** - Платформа для визуализации данных и создания интерактивных дашбордов
- **Actuator** - Компонент Spring Boot для мониторинга и управления состоянием приложения
- **Eureka-client**- Клиентская библиотека для взаимодействия с Eureka Server,
  позволяющая микросервисам автоматически регистрироваться и обнаруживать другие сервисы
  в распределенной системе.

## Доступ к Actuator
-**http://localhost:8080/actuator** - доступ к Actuator (набор функций для мониторинга и управления приложением
на основе Spring Boot, предоставляет информацию о состоянии приложения и его метриках)
## Доступ к Prometheus:
**http://localhost:9090** - доступ к интерфейсу Prometheus для мониторинга и анализа собранных метрик.

## Доступ к Grafana
-**http://localhost:3000** - доступ к интерфейсу Grafana для визуализации метрик и создания интерактивных дашбордов
(Пользователь: admin и Пароль: admin, задано по умолчанию, рекомендуется изменить после первого входа)




