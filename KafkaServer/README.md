# Микросервис - KafkaServer

## Краткое описание микросервиса:
 KafkaServer — это микросервис, который получает запросы через REST API от микросервиса "ApiGataway"
 и является продьюсером, т.е. передаёт эти запросы в топики Kafka ("fetch-currency-topic" и "query-currency-topic"), 
 которые слушают другие микросервисы ("FetchCurrencyService" и "QueryCurrencyService"). 
 Также я вляется консьюмером, т.е. слушает топик "response-topic", в которые передаются ответы на посланные запросы
 от других микросервисов, и после получения ответов, они передаются обратно в микросервис Gateway.
 При получении запросов данный микросервис формирует запрос для отправки его в нужный топик, при этом,
 формирует данный запрос в виде записи ProducerRecord, у которой есть полезная нагрузка payload и заголовок header в который входит:
 requestId - уникальный идентификатор запроса, для определения дублирующихся сообщений.
 Для отправки сообщений в топик используется пул потоков ExecutorService, который управляет выполнением задач асинхронно
 через метод submitTask. Это позволяет эффективно обрабатывать множество запросов одновременно,
 не блокируя основной поток.
 Для получения ответа на запрос используется CompletableFuture, который ожидает ответа от других микросервисов
 или выбрасывает исключение в случае ошибки. Это обеспечивает асинхронную обработку и управление состоянием запросов,
 позволяя легко обрабатывать результаты и исключения.
 Конфигурационный клас WebConfig служит для настройки CORS (Cross-Origin Resource Sharing), а именно настройка разрешенных источников, методов и других параметров, для работы с ApiGataway,
 от которого приходят запросы и к которому отсылаются ответы.
 Конфигурационный клас WebClientConfig используется для выполнения асинхронных HTTP-запросов в приложении.
 WebClient является частью Spring WebFlux и предоставляет удобный API для работы с веб-сервисами.
 WebFlux — это модуль Spring, который поддерживает реактивное программирование и предоставляет возможности
 для создания асинхронных, неблокирующих веб-приложений. Он основан на проекте Reactor и использует подход,
 который позволяет обрабатывать запросы и ответы не блокируя потоки, что особенно важно в сценариях с высокой нагрузкой.
 

## Проект поддерживает следующие функции:
- **Получение запросов от микросервиса "ApiGataway".**
- **Формирование запроса в нужный топик кафка.**
- **Получение ответа из топика ответов кафка.**
- **Обработка ответа и отправка в микросервис "ApiGataway".**
- **Документирование API с помощью Swagger.**


## Стек технологий
- **Java 21** — основной язык программирования.
- **Spring Boot** (версия 3.4.0) — фреймворк для создания приложения.
- **Maven** — система сборки и управления зависимостями.
- **Swagger** — для документирования API. 

## Системные требования
- **Java 21**
- **Maven 4.0.0**
- **Spring Boot 3.3.5**

## Cписок путей всех контроллеров приложения (Конечные точки(endPoints)):
- **Доступные конечные точки:**
- **http://localhost:8081/currencies/all - Получает все доступные курсы валют.**
- **http://localhost:8081/currencies/single/{currencyCode} - Получает курс конкретной валюты.**
- **http://localhost:8081/currencies/filter/{filter} - Получает курсы валют по фильтру.**

## Доступ к приложению:
- **http://localhost:8081 <--- веб-интерфейс приложения.**
- **http://localhost:8081/swagger-ui/index.html <--- Swagger UI для тестирования API.**
- **http://localhost:8081/v3/api-docs <--- доступ к документации в браузере.**




